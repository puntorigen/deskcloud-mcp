{
	"info": {
		"_postman_id": "claude-computer-use-api-v1",
		"name": "ðŸ–¥ï¸ Claude Computer Use API",
		"description": "# Claude Computer Use Backend API\n\nA comprehensive API for managing AI agent sessions that can control a virtual desktop environment.\n\n## Overview\n\nThis collection provides endpoints for:\n- **Health Monitoring** - Check system status and readiness\n- **Session Management** - Create, list, retrieve, and delete sessions\n- **Agent Interaction** - Send messages and receive real-time streaming responses\n\n## Getting Started\n\n1. **Import the Environment** - Import the `claude-computer-use-api.postman_environment.json` file\n2. **Start the Backend** - Run `docker-compose up` in the project root\n3. **Run Health Check** - Execute the \"Health Check\" request to verify connectivity\n4. **Create a Session** - Use \"Create Session\" to start a new agent session\n5. **Send Messages** - Use \"Send Message\" to interact with the AI agent\n\n## Environment Variables\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `base_url` | API base URL | `http://localhost:8000` |\n| `api_version` | API version prefix | `v1` |\n| `session_id` | Current session ID | Auto-populated |\n| `message_id` | Last message ID | Auto-populated |\n\n## Response Codes\n\n- `200` - Success\n- `201` - Created\n- `204` - No Content (deletion)\n- `404` - Not Found\n- `409` - Conflict\n- `422` - Validation Error\n- `503` - Service Unavailable\n\n---\n\n**Author:** Pablo Schaffner  \n**Version:** 1.0.0  \n**License:** MIT",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "api_version",
			"value": "v1",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "ðŸ¥ Health & Status",
			"description": "Endpoints for monitoring system health, readiness, and configuration.",
			"item": [
				{
					"name": "Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Validate response status",
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"// Validate response structure",
									"pm.test('Response has correct structure', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('status');",
									"    pm.expect(json).to.have.property('version');",
									"    pm.expect(json).to.have.property('timestamp');",
									"    pm.expect(json).to.have.property('checks');",
									"});",
									"",
									"// Validate health status",
									"pm.test('System is healthy', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.status).to.equal('healthy');",
									"});",
									"",
									"// Validate database check",
									"pm.test('Database is healthy', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.checks.database.status).to.equal('healthy');",
									"});",
									"",
									"// Validate API key configuration",
									"pm.test('API key is configured', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.checks.api_key.status).to.equal('configured');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/health",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "health"]
						},
						"description": "Comprehensive health check endpoint that verifies:\n- Database connectivity\n- API key configuration\n- System status\n\n**Use case:** Dashboard monitoring, alerting systems."
					},
					"response": [
						{
							"name": "Healthy Response",
							"originalRequest": {
								"method": "GET",
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/health",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "health"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"status\": \"healthy\",\n    \"version\": \"1.0.0\",\n    \"timestamp\": \"2024-12-07T10:30:00Z\",\n    \"checks\": {\n        \"database\": {\"status\": \"healthy\", \"type\": \"sqlite\"},\n        \"api_key\": {\"status\": \"configured\", \"provider\": \"anthropic\"}\n    }\n}"
						}
					]
				},
				{
					"name": "Readiness Probe",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('System is ready', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.status).to.equal('ready');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/health/ready",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "health", "ready"]
						},
						"description": "Kubernetes-style readiness probe.\n\nReturns `200 OK` if the service is ready to accept traffic.\nReturns `503` if dependencies are not ready.\n\n**Use case:** Load balancer health checks, Kubernetes readiness probes."
					},
					"response": [
						{
							"name": "Ready",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"status\": \"ready\"\n}"
						},
						{
							"name": "Not Ready",
							"status": "Service Unavailable",
							"code": 503,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"detail\": \"Database not ready: connection failed\"\n}"
						}
					]
				},
				{
					"name": "Liveness Probe",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Process is alive', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.status).to.equal('alive');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/health/live",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "health", "live"]
						},
						"description": "Simple liveness check. Returns `200` if the process is running.\n\n**Use case:** Kubernetes liveness probes, basic uptime monitoring."
					},
					"response": [
						{
							"name": "Alive",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"status\": \"alive\"\n}"
						}
					]
				},
				{
					"name": "Get Configuration",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has configuration fields', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('app_name');",
									"    pm.expect(json).to.have.property('version');",
									"    pm.expect(json).to.have.property('api_provider');",
									"    pm.expect(json).to.have.property('default_model');",
									"    pm.expect(json).to.have.property('available_providers');",
									"});",
									"",
									"pm.test('Has available providers list', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.available_providers).to.be.an('array');",
									"    pm.expect(json.available_providers).to.include('anthropic');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/config",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "config"]
						},
						"description": "Retrieve non-sensitive configuration information.\n\nReturns:\n- App name and version\n- Configured API provider\n- Default model\n- VNC URL\n- Available providers\n\n**Use case:** Frontend initialization, capability discovery."
					},
					"response": [
						{
							"name": "Configuration",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"app_name\": \"Claude Computer Use Backend\",\n    \"version\": \"1.0.0\",\n    \"api_provider\": \"anthropic\",\n    \"default_model\": \"claude-sonnet-4-5-20250929\",\n    \"vnc_url\": \"http://localhost:6080/vnc.html\",\n    \"available_providers\": [\"anthropic\", \"bedrock\", \"vertex\"]\n}"
						}
					]
				}
			]
		},
		{
			"name": "ðŸ“‹ Sessions",
			"description": "Session management endpoints for creating, listing, retrieving, and archiving agent sessions.",
			"item": [
				{
					"name": "Create Session",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 201', function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test('Response has session structure', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('title');",
									"    pm.expect(json).to.have.property('status');",
									"    pm.expect(json).to.have.property('model');",
									"    pm.expect(json).to.have.property('provider');",
									"    pm.expect(json).to.have.property('created_at');",
									"    pm.expect(json).to.have.property('vnc_url');",
									"});",
									"",
									"pm.test('Session is active', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.status).to.equal('active');",
									"});",
									"",
									"// Save session_id for subsequent requests",
									"pm.test('Save session_id to environment', function () {",
									"    const json = pm.response.json();",
									"    pm.collectionVariables.set('session_id', json.id);",
									"    console.log('Created session:', json.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Demo Session - Weather Search\",\n    \"model\": \"claude-sonnet-4-5-20250929\",\n    \"provider\": \"anthropic\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions"]
						},
						"description": "Create a new agent session.\n\n## Parameters\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `title` | string | No | Human-readable title (auto-generated if empty) |\n| `model` | string | No | Claude model (default: claude-sonnet-4-5-20250929) |\n| `provider` | string | No | API provider: anthropic, bedrock, vertex |\n| `system_prompt_suffix` | string | No | Custom instructions for the agent |\n\n## Notes\n\n- The `session_id` is automatically saved for subsequent requests\n- Each session gets a unique VNC URL for desktop viewing"
					},
					"response": [
						{
							"name": "Session Created",
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"id\": \"sess_abc123def456\",\n    \"title\": \"Demo Session - Weather Search\",\n    \"status\": \"active\",\n    \"model\": \"claude-sonnet-4-5-20250929\",\n    \"provider\": \"anthropic\",\n    \"created_at\": \"2024-12-07T10:30:00Z\",\n    \"updated_at\": \"2024-12-07T10:30:00Z\",\n    \"vnc_url\": \"http://localhost:6080/vnc.html\"\n}"
						}
					]
				},
				{
					"name": "Create Session (with Custom Prompt)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 201', function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test('Session created with custom settings', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.id).to.be.a('string');",
									"    pm.collectionVariables.set('session_id', json.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Research Assistant\",\n    \"model\": \"claude-sonnet-4-5-20250929\",\n    \"provider\": \"anthropic\",\n    \"system_prompt_suffix\": \"You are a research assistant. Always cite sources and be thorough in your searches. Take screenshots frequently to document your findings.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions"]
						},
						"description": "Create a session with a custom system prompt suffix.\n\nThe `system_prompt_suffix` allows you to add custom instructions that are appended to the agent's system prompt."
					},
					"response": []
				},
				{
					"name": "Create Session (Minimal)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 201', function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test('Session has auto-generated title', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.title).to.be.a('string');",
									"    pm.expect(json.title.length).to.be.greaterThan(0);",
									"    pm.collectionVariables.set('session_id', json.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions"]
						},
						"description": "Create a session with all default values. Title is auto-generated, default model and provider are used."
					},
					"response": []
				},
				{
					"name": "List Sessions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has sessions array', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('sessions');",
									"    pm.expect(json.sessions).to.be.an('array');",
									"});",
									"",
									"pm.test('Response has total count', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('total');",
									"    pm.expect(json.total).to.be.a('number');",
									"});",
									"",
									"pm.test('Sessions have required fields', function () {",
									"    const json = pm.response.json();",
									"    if (json.sessions.length > 0) {",
									"        const session = json.sessions[0];",
									"        pm.expect(session).to.have.property('id');",
									"        pm.expect(session).to.have.property('title');",
									"        pm.expect(session).to.have.property('status');",
									"        pm.expect(session).to.have.property('created_at');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions?limit=10&offset=0",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions"],
							"query": [
								{
									"key": "limit",
									"value": "10",
									"description": "Maximum results (1-100)"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Results to skip"
								},
								{
									"key": "include_archived",
									"value": "false",
									"description": "Include archived sessions",
									"disabled": true
								}
							]
						},
						"description": "List all sessions with optional filtering and pagination.\n\n## Query Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `limit` | int | 50 | Max results (1-100) |\n| `offset` | int | 0 | Skip count |\n| `include_archived` | bool | false | Include archived |"
					},
					"response": [
						{
							"name": "Sessions List",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"sessions\": [\n        {\n            \"id\": \"sess_abc123\",\n            \"title\": \"Weather Search Task\",\n            \"status\": \"active\",\n            \"model\": \"claude-sonnet-4-5-20250929\",\n            \"provider\": \"anthropic\",\n            \"created_at\": \"2024-12-07T10:30:00Z\",\n            \"updated_at\": \"2024-12-07T10:35:00Z\",\n            \"vnc_url\": \"http://localhost:6080/vnc.html\"\n        }\n    ],\n    \"total\": 1\n}"
						}
					]
				},
				{
					"name": "Get Session",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has session details', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('title');",
									"    pm.expect(json).to.have.property('status');",
									"    pm.expect(json).to.have.property('messages');",
									"});",
									"",
									"pm.test('Messages is an array', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.messages).to.be.an('array');",
									"});",
									"",
									"pm.test('Session ID matches request', function () {",
									"    const json = pm.response.json();",
									"    const requestedId = pm.collectionVariables.get('session_id');",
									"    pm.expect(json.id).to.equal(requestedId);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions", "{{session_id}}"]
						},
						"description": "Retrieve a specific session with its complete message history.\n\nThe response includes all messages exchanged with the agent, including tool use and results."
					},
					"response": [
						{
							"name": "Session with Messages",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"id\": \"sess_abc123\",\n    \"title\": \"Weather Search Task\",\n    \"status\": \"active\",\n    \"model\": \"claude-sonnet-4-5-20250929\",\n    \"provider\": \"anthropic\",\n    \"created_at\": \"2024-12-07T10:30:00Z\",\n    \"updated_at\": \"2024-12-07T10:35:00Z\",\n    \"vnc_url\": \"http://localhost:6080/vnc.html\",\n    \"system_prompt_suffix\": null,\n    \"messages\": [\n        {\n            \"id\": \"msg_001\",\n            \"role\": \"user\",\n            \"content\": \"Search the weather in Santiago, Chile\",\n            \"tool_use_id\": null,\n            \"timestamp\": \"2024-12-07T10:31:00Z\"\n        }\n    ]\n}"
						},
						{
							"name": "Session Not Found",
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"detail\": \"Session not found\"\n}"
						}
					]
				},
				{
					"name": "Delete Session",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 204', function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"pm.test('Response body is empty', function () {",
									"    pm.expect(pm.response.text()).to.be.empty;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions", "{{session_id}}"]
						},
						"description": "Archive a session (soft delete).\n\nThe session data is preserved but marked as archived. Use `include_archived=true` when listing to see archived sessions.\n\n**âš ï¸ Warning:** This will archive the current `session_id`. Create a new session after this."
					},
					"response": [
						{
							"name": "Session Deleted",
							"status": "No Content",
							"code": 204,
							"body": ""
						}
					]
				}
			]
		},
		{
			"name": "ðŸ’¬ Messages",
			"description": "Send messages to the AI agent and manage processing.",
			"item": [
				{
					"name": "Send Message",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has message_id', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('message_id');",
									"    pm.collectionVariables.set('message_id', json.message_id);",
									"});",
									"",
									"pm.test('Status is processing', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.status).to.equal('processing');",
									"});",
									"",
									"pm.test('Response has stream_url', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('stream_url');",
									"    pm.expect(json.stream_url).to.include('/stream');",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Ensure we have a session_id",
									"if (!pm.collectionVariables.get('session_id')) {",
									"    console.warn('No session_id set. Create a session first!');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"content\": \"Open Firefox and search for the current weather in San Francisco\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}/messages",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions", "{{session_id}}", "messages"]
						},
						"description": "Send a user message to the AI agent.\n\n## Request Body\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `content` | string | Yes | Message (1-10000 chars) |\n\n## Response\n\nReturns immediately with a `message_id` and `stream_url`. Connect to the stream URL with SSE to receive real-time updates.\n\n## Errors\n\n- `404` - Session not found\n- `409` - Session already processing\n- `503` - API key not configured"
					},
					"response": [
						{
							"name": "Processing Started",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"message_id\": \"msg_xyz789\",\n    \"status\": \"processing\",\n    \"stream_url\": \"/api/v1/sessions/sess_abc123/stream\"\n}"
						},
						{
							"name": "Already Processing",
							"status": "Conflict",
							"code": 409,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"detail\": \"Session is already processing a message\"\n}"
						}
					]
				},
				{
					"name": "Send Message (Simple Task)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Message accepted', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.status).to.equal('processing');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"content\": \"Take a screenshot of the current desktop\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}/messages",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions", "{{session_id}}", "messages"]
						},
						"description": "Simple task - just take a screenshot. Good for quick testing."
					},
					"response": []
				},
				{
					"name": "Send Message (Complex Task)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Message accepted', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json.status).to.equal('processing');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"content\": \"Open Firefox, go to google.com, search for 'Claude AI Anthropic', click on the first result, and take a screenshot of the page.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}/messages",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions", "{{session_id}}", "messages"]
						},
						"description": "Complex multi-step task that demonstrates the agent's capabilities.\n\nThis task will:\n1. Open Firefox browser\n2. Navigate to Google\n3. Perform a search\n4. Click a result\n5. Take a screenshot"
					},
					"response": []
				},
				{
					"name": "Cancel Processing",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has status', function () {",
									"    const json = pm.response.json();",
									"    pm.expect(json).to.have.property('status');",
									"    pm.expect(['cancelled', 'not_processing']).to.include(json.status);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}/cancel",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions", "{{session_id}}", "cancel"]
						},
						"description": "Cancel ongoing agent processing.\n\n## Response Status\n\n- `cancelled` - Processing was stopped\n- `not_processing` - No active processing to cancel"
					},
					"response": [
						{
							"name": "Cancelled",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"status\": \"cancelled\",\n    \"message\": \"Processing cancelled successfully\"\n}"
						},
						{
							"name": "Not Processing",
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"body": "{\n    \"status\": \"not_processing\",\n    \"message\": \"No active processing to cancel\"\n}"
						}
					]
				},
				{
					"name": "Stream Events (SSE) âš¡",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Note: SSE endpoints don't work well in Postman",
									"// This is for documentation purposes",
									"pm.test('Endpoint exists (may timeout)', function () {",
									"    // SSE connections stay open, so we just check it responds",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 408]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "text/event-stream"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}/stream",
							"host": ["{{base_url}}"],
							"path": ["api", "{{api_version}}", "sessions", "{{session_id}}", "stream"]
						},
						"description": "# âš ï¸ SSE Endpoint - Use Browser or Code\n\nThis is a **Server-Sent Events** endpoint. Postman does not fully support SSE streaming.\n\n## How to Test\n\n### Option 1: Browser Console\n\n```javascript\nconst es = new EventSource('http://localhost:8000/api/v1/sessions/YOUR_SESSION_ID/stream');\n\nes.addEventListener('text', (e) => console.log('Text:', JSON.parse(e.data)));\nes.addEventListener('tool_use', (e) => console.log('Tool:', JSON.parse(e.data)));\nes.addEventListener('message_complete', (e) => {\n    console.log('Done!');\n    es.close();\n});\n```\n\n### Option 2: curl\n\n```bash\ncurl -N -H \"Accept: text/event-stream\" \\\n  http://localhost:8000/api/v1/sessions/YOUR_SESSION_ID/stream\n```\n\n### Option 3: Use the Frontend\n\nOpen `http://localhost:8000` in a browser for the full UI experience.\n\n## Event Types\n\n| Event | Description |\n|-------|-------------|\n| `message_start` | Processing started |\n| `text` | Text content from agent |\n| `thinking` | Extended thinking content |\n| `tool_use` | Agent invoking a tool |\n| `tool_result` | Tool execution result |\n| `message_complete` | Processing finished |\n| `error` | Error occurred |\n| `keepalive` | Connection maintenance |"
					},
					"response": []
				}
			]
		},
		{
			"name": "ðŸ§ª Test Scenarios",
			"description": "Pre-configured test scenarios for demo purposes.",
			"item": [
				{
					"name": "ðŸŽ¬ Demo Flow: Weather Search",
					"item": [
						{
							"name": "1. Create Demo Session",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Session created', function () {",
											"    pm.response.to.have.status(201);",
											"    const json = pm.response.json();",
											"    pm.collectionVariables.set('demo_session_id', json.id);",
											"    pm.collectionVariables.set('session_id', json.id);",
											"    console.log('Demo session created:', json.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"ðŸŽ¬ Demo: Weather Search\",\n    \"system_prompt_suffix\": \"Be concise in your responses. Take screenshots after each major action.\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions"]
								}
							},
							"response": []
						},
						{
							"name": "2. Search Weather",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Message sent', function () {",
											"    pm.response.to.have.status(200);",
											"    const json = pm.response.json();",
											"    pm.expect(json.status).to.equal('processing');",
											"    console.log('Watch the VNC to see the agent work!');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"content\": \"Open Firefox and search for the current weather in Tokyo, Japan. Take a screenshot of the results.\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}/messages",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions", "{{session_id}}", "messages"]
								}
							},
							"response": []
						},
						{
							"name": "3. Get Results",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Session retrieved', function () {",
											"    pm.response.to.have.status(200);",
											"    const json = pm.response.json();",
											"    console.log('Messages:', json.messages.length);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions/{{session_id}}",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions", "{{session_id}}"]
								}
							},
							"response": []
						}
					],
					"description": "A complete demo flow showing:\n1. Creating a session\n2. Sending a weather search task\n3. Retrieving results\n\n**Tip:** Open the VNC viewer to watch the agent work!"
				},
				{
					"name": "ðŸ”„ Full CRUD Test",
					"item": [
						{
							"name": "1. List Initial Sessions",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('List successful', function () {",
											"    pm.response.to.have.status(200);",
											"    const json = pm.response.json();",
											"    pm.collectionVariables.set('initial_count', json.total);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions"]
								}
							},
							"response": []
						},
						{
							"name": "2. Create Test Session",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Created', function () {",
											"    pm.response.to.have.status(201);",
											"    const json = pm.response.json();",
											"    pm.collectionVariables.set('test_session_id', json.id);",
											"    pm.collectionVariables.set('session_id', json.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"CRUD Test Session\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions"]
								}
							},
							"response": []
						},
						{
							"name": "3. Verify Created",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Session exists', function () {",
											"    pm.response.to.have.status(200);",
											"    const json = pm.response.json();",
											"    pm.expect(json.title).to.equal('CRUD Test Session');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions/{{test_session_id}}",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions", "{{test_session_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "4. Delete Session",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Deleted', function () {",
											"    pm.response.to.have.status(204);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions/{{test_session_id}}",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions", "{{test_session_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "5. Verify Deleted",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Not found', function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/{{api_version}}/sessions/{{test_session_id}}",
									"host": ["{{base_url}}"],
									"path": ["api", "{{api_version}}", "sessions", "{{test_session_id}}"]
								}
							},
							"response": []
						}
					],
					"description": "Tests the complete CRUD lifecycle:\n1. List (baseline)\n2. Create\n3. Read (verify creation)\n4. Delete\n5. Read (verify deletion)"
				}
			]
		}
	]
}

